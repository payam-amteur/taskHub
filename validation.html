<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Document</title>
            <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
</head>
<body>

            <div class="container mt-5">
                        <h2>اعتبار سنجی</h2>
                        <form id="myForm" class="needs-validation" novalidate>

                                    <div class="mb-3 name-alert">
                                                <label for="name" class="form-lable">نام</label>
                                                <input type="text" id="name" class="form-control" placeholder="لطفا نام خود را وارد کنید">

                                    </div>
                                    <div class="mb-3 age-alert">
                                                <label for="age" class="form-lable">سن</label>
                                                <input type="number" id="age" class="form-control" placeholder="لطفا سن خود را وارد کنید">

                                    </div>
                                    <div class="mb-3 email-alert">
                                                <label for="email" class="form-lable">ایمیل</label>
                                                <input type="email" id="email" class="form-control" placeholder="لطفا ایمیل خود را وارد کنید">

                                    </div>
                                    <div class="mb-3 mobile-alert">
                                                <label for="mobile" class="form-lable">موبایل</label>
                                                <input type="text" id="mobile" class="form-control" placeholder="لطفا موبایل خود را وارد کنید">

                                    </div>
                                    <button type="submit" class="btn btn-primary">ارسال</button>

                        </form>
            </div>
            <div id="alertcontainer"></div>

            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
            <script>
                        document.addEventListener("DOMContentLoaded",() => {
                                    const form = document.getElementById('myForm');
                                    const alertContainer = document.getElementById('alertcontainer');

                        const showAlert = (massages,type = "danger") => {
                                    const listMassage = massages.map(msg => `<li>${msg}</li>`).join("");

                                    alertContainer.innerHTML = `
                                    <div class ="alert alert-${type} alert-dismissible fade show" role="alert">
                                                <ul>${listMassage}</ul>
                                                <button type="button" class="btn-close" data-bs-dismiss="alert"
                                    </div>
                                    `
                        };
                        const alertByName = (Alert,type = "danger") => {
                                    `
                                    <div class ="alert alert-${type} alert-dismissible fade show" role="alert">
                                                <ul></ul>
                                                </div>
                                    `
                        }

                         const validateName = (name) => name.trim().length >= 3;
                         const validateAge = (age) => age >= 18 && age <=100;
                         const validateEmail = (email) => /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
                         const validateMobile = (mobile) => /^09\d{9}$/.test(mobile);
                                     

                         form.addEventListener("submit",(e) =>{
                                    e.preventDefault();
                                    const name = document.getElementById("name").value.trim();
                                    const email = document.getElementById("email").value.trim();
                                    const age = parseInt(document.getElementById("age").value.trim(),10);
                                    const mobile = document.getElementById("mobile").value.trim();

                                    const nameAlert = document.querySelector(".name-alert");
                                    const ageAlert = document.querySelector(".age-alert");
                                    const emailAlert = document.querySelector(".email-alert");
                                    const mobileAlert = document.querySelector(".mobile-alert");

                                    const errors = [];

                                    if (!validateName(name)){
                                       errors.push("نام باید حداقل 3 کارکتر باشد");   
                                        
                                       
                                    }
                                     if (!validateAge(age)){
                                       errors.push("نام باید بین 18 تا 100 باشد");    
                                    }
                                     if (!validateEmail(email)){
                                       errors.push("ایمیل معتبر نیست");    
                                    }
                                     if (!validateMobile(mobile)){
                                       errors.push("شماره موبایل معتبر نیست");    
                                    }



                                    if(errors.length > 0){
                                                showAlert(errors);
                                    }else{
                                                showAlert(["اطلاعات با موفقیت ثبت شد"],"success");
                                                form.reset();
                                    }
                                    
                         }); 
                        })
            </script>
</body>
</html>

<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>اعتبارسنجی فرم</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
</head>
<body>

  <div class="container mt-5">
    <h2>اعتبار سنجی</h2>
    <form id="myForm" novalidate>

      <div class="mb-3 name-alert">
        <label for="name" class="form-label">نام</label>
        <input type="text" id="name" class="form-control" placeholder="لطفا نام خود را وارد کنید">
      </div>

      <div class="mb-3 age-alert">
        <label for="age" class="form-label">سن</label>
        <input type="number" id="age" class="form-control" placeholder="لطفا سن خود را وارد کنید">
      </div>

      <div class="mb-3 email-alert">
        <label for="email" class="form-label">ایمیل</label>
        <input type="email" id="email" class="form-control" placeholder="لطفا ایمیل خود را وارد کنید">
      </div>

      <div class="mb-3 mobile-alert">
        <label for="mobile" class="form-label">موبایل</label>
        <input type="text" id="mobile" class="form-control" placeholder="لطفا موبایل خود را وارد کنید">
      </div>

      <button type="submit" class="btn btn-primary">ارسال</button>
    </form>

    <div id="alertcontainer" class="mt-3"></div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const form = document.getElementById('myForm');
      const alertContainer = document.getElementById('alertcontainer');

      // تابع برای نمایش هشدار کلی (بالای فرم)
      const showAlert = (messages, type = "danger") => {
        const listMessage = messages.map(msg => `<li>${msg}</li>`).join("");
        alertContainer.innerHTML = `
          <div class="alert alert-${type} alert-dismissible fade show" role="alert">
            <ul class="mb-0">${listMessage}</ul>
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
          </div>
        `;
      };

      // تابع برای نمایش هشدار زیر فیلد خاص
      const showFieldError = (container, message) => {
        // اول هر هشدار قبلی رو حذف کنیم
        const oldAlert = container.querySelector(".text-danger");
        if (oldAlert) oldAlert.remove();

        // نمایش پیام خطا زیر فیلد
        const error = document.createElement("div");
        error.className = "text-danger mt-1 small";
        error.innerText = message;
        container.appendChild(error);
      };

      // اعتبارسنجی‌ها
      const validateName = (name) => name.trim().length >= 3;
      const validateAge = (age) => age >= 18 && age <= 100;
      const validateEmail = (email) => /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
      const validateMobile = (mobile) => /^09\d{9}$/.test(mobile);

      form.addEventListener("submit", (e) => {
        e.preventDefault();

        // گرفتن مقادیر
        const name = document.getElementById("name").value.trim();
        const age = parseInt(document.getElementById("age").value.trim(), 10);
        const email = document.getElementById("email").value.trim();
        const mobile = document.getElementById("mobile").value.trim();

        // گرفتن کانتینرهای هر فیلد
        const nameAlert = document.querySelector(".name-alert");
        const ageAlert = document.querySelector(".age-alert");
        const emailAlert = document.querySelector(".email-alert");
        const mobileAlert = document.querySelector(".mobile-alert");

        // حذف پیام‌های قبلی
        document.querySelectorAll(".text-danger").forEach(el => el.remove());
        alertContainer.innerHTML = "";

        let hasError = false;

        if (!validateName(name)) {
          showFieldError(nameAlert, "نام باید حداقل ۳ کاراکتر باشد");
          hasError = true;
        }

        if (!validateAge(age)) {
          showFieldError(ageAlert, "سن باید بین ۱۸ تا ۱۰۰ باشد");
          hasError = true;
        }

        if (!validateEmail(email)) {
          showFieldError(emailAlert, "ایمیل معتبر نیست");
          hasError = true;
        }

        if (!validateMobile(mobile)) {
          showFieldError(mobileAlert, "شماره موبایل معتبر نیست (مثلاً: 09123456789)");
          hasError = true;
        }

        // نمایش پیام کلی
        if (hasError) {
          showAlert(["لطفاً خطاهای زیر را برطرف کنید."]);
        } else {
          showAlert(["اطلاعات با موفقیت ثبت شد ✅"], "success");
          form.reset();
        }
      });
    });
  </script>
</body>
</html>
